# –í—ñ—Ä—Ç—É–∞–ª—ñ–∑–∞—Ü—ñ—è —Å–ø–∏—Å–∫—ñ–≤ –¥–ª—è –≤–µ–ª–∏–∫–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤

## üìñ –©–æ —Ç–∞–∫–µ –≤—ñ—Ä—Ç—É–∞–ª—ñ–∑–∞—Ü—ñ—è?

**–í—ñ—Ä—Ç—É–∞–ª—ñ–∑–∞—Ü—ñ—è —Å–ø–∏—Å–∫—ñ–≤** (Virtual Scrolling) - —Ü–µ —Ç–µ—Ö–Ω—ñ–∫–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó, –ø—Ä–∏ —è–∫—ñ–π —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ **–≤–∏–¥–∏–º–∞ —á–∞—Å—Ç–∏–Ω–∞** —Å–ø–∏—Å–∫—É, –∞ –Ω–µ –≤—Å—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ –æ–¥–Ω–æ—á–∞—Å–Ω–æ.

### –ü—Ä–æ–±–ª–µ–º–∞ –±–µ–∑ –≤—ñ—Ä—Ç—É–∞–ª—ñ–∑–∞—Ü—ñ—ó

–ö–æ–ª–∏ —É –≤–∞—Å —î 1000+ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —É —Å–ø–∏—Å–∫—É:

```tsx
// ‚ùå –ü–†–û–ë–õ–ï–ú–ê: –†–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è –í–°–Ü 1000+ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤
{declarations.map(declaration => (
  <DeclarationRow key={declaration.id} data={declaration} />
))}
```

**–ù–∞—Å–ª—ñ–¥–∫–∏**:
- üêå **–ü–æ–≤—ñ–ª—å–Ω–∏–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥** - React —Å—Ç–≤–æ—Ä—é—î 1000+ DOM –µ–ª–µ–º–µ–Ω—Ç—ñ–≤
- üíæ **–í–µ–ª–∏–∫–µ —Å–ø–æ–∂–∏–≤–∞–Ω–Ω—è –ø–∞–º'—è—Ç—ñ** - –≤—Å—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ –≤ DOM
- üìâ **–ù–∏–∑—å–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å** - –ø–æ–≤—ñ–ª—å–Ω–∏–π —Å–∫—Ä–æ–ª, –ª–∞–≥–∏
- ‚è±Ô∏è **–î–æ–≤–≥–∏–π —á–∞—Å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è** - –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á —á–µ–∫–∞—î –ø–æ–∫–∏ –≤—Å–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç—å—Å—è

### –†—ñ—à–µ–Ω–Ω—è –∑ –≤—ñ—Ä—Ç—É–∞–ª—ñ–∑–∞—Ü—ñ—î—é

```tsx
// ‚úÖ –†–Ü–®–ï–ù–ù–Ø: –†–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ ~10-20 –≤–∏–¥–∏–º–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤
<VirtualList
  items={declarations}
  renderItem={(declaration) => <DeclarationRow data={declaration} />}
/>
```

**–ü–µ—Ä–µ–≤–∞–≥–∏**:
- ‚ö° **–®–≤–∏–¥–∫–∏–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥** - —Ç—ñ–ª—å–∫–∏ –≤–∏–¥–∏–º—ñ –µ–ª–µ–º–µ–Ω—Ç–∏
- üíæ **–ú—ñ–Ω—ñ–º–∞–ª—å–Ω–µ —Å–ø–æ–∂–∏–≤–∞–Ω–Ω—è –ø–∞–º'—è—Ç—ñ** - ~10-20 DOM –µ–ª–µ–º–µ–Ω—Ç—ñ–≤
- üìà **–í–∏—Å–æ–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å** - –ø–ª–∞–≤–Ω–∏–π —Å–∫—Ä–æ–ª –Ω–∞–≤—ñ—Ç—å –∑ 10,000+ –µ–ª–µ–º–µ–Ω—Ç–∞–º–∏
- ‚ö° **–ú–∏—Ç—Ç—î–≤–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è** - –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –±–∞—á–∏—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç –æ–¥—Ä–∞–∑—É

---

## üîß –Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î?

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–æ–±–æ—Ç–∏

1. **–í–∏–∑–Ω–∞—á–µ–Ω–Ω—è –≤–∏–¥–∏–º–æ—ó –æ–±–ª–∞—Å—Ç—ñ** (viewport):
   - –í–∏—Å–æ—Ç–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞: 600px
   - –í–∏—Å–æ—Ç–∞ –æ–¥–Ω–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞: 50px
   - –í–∏–¥–∏–º–æ: ~12 –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ (600 / 50)

2. **–†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –≤–∏–¥–∏–º–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤**:
   - –ü—Ä–∏ —Å–∫—Ä–æ–ª—ñ –Ω–∞ 200px –≤–Ω–∏–∑ ‚Üí –ø–æ–∫–∞–∑—É—î–º–æ –µ–ª–µ–º–µ–Ω—Ç–∏ 4-16
   - –ü—Ä–∏ —Å–∫—Ä–æ–ª—ñ –Ω–∞ 1000px –≤–Ω–∏–∑ ‚Üí –ø–æ–∫–∞–∑—É—î–º–æ –µ–ª–µ–º–µ–Ω—Ç–∏ 20-32

3. **–î–∏–Ω–∞–º—ñ—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è**:
   - –ü—Ä–∏ —Å–∫—Ä–æ–ª—ñ ‚Üí –≤–∏–¥–∞–ª—è—î–º–æ –Ω–µ–≤–∏–¥–∏–º—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ –∑ DOM
   - –î–æ–¥–∞—î–º–æ –Ω–æ–≤—ñ –≤–∏–¥–∏–º—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ –≤ DOM
   - –ó–±–µ—Ä—ñ–≥–∞—î–º–æ —Ç—ñ–ª—å–∫–∏ ~10-20 –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –≤ DOM –æ–¥–Ω–æ—á–∞—Å–Ω–æ

### –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä (600px –≤–∏—Å–æ—Ç–∞)   ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ –ï–ª–µ–º–µ–Ω—Ç 1 (–≤–∏–¥–∏–º–∏–π)     ‚îÇ ‚îÇ ‚Üê –†–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è
‚îÇ  ‚îÇ –ï–ª–µ–º–µ–Ω—Ç 2 (–≤–∏–¥–∏–º–∏–π)     ‚îÇ ‚îÇ ‚Üê –†–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è
‚îÇ  ‚îÇ –ï–ª–µ–º–µ–Ω—Ç 3 (–≤–∏–¥–∏–º–∏–π)     ‚îÇ ‚îÇ ‚Üê –†–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è
‚îÇ  ‚îÇ ...                      ‚îÇ ‚îÇ
‚îÇ  ‚îÇ –ï–ª–µ–º–µ–Ω—Ç 12 (–≤–∏–¥–∏–º–∏–π)    ‚îÇ ‚îÇ ‚Üê –†–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                              ‚îÇ
‚îÇ  –ï–ª–µ–º–µ–Ω—Ç 13-1000            ‚îÇ ‚Üê –ù–ï —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è
‚îÇ  (–Ω–µ–≤–∏–¥–∏–º—ñ, –Ω–µ –≤ DOM)        ‚îÇ
‚îÇ                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

1. **–í–∏—Ä—ñ–≤–Ω—é–≤–∞–Ω–Ω—è (padding)**:
   - –í–µ—Ä—Ö–Ω—ñ–π padding = –≤–∏—Å–æ—Ç–∞ –Ω–µ–≤–∏–¥–∏–º–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –∑–≤–µ—Ä—Ö—É
   - –ù–∏–∂–Ω—ñ–π padding = –≤–∏—Å–æ—Ç–∞ –Ω–µ–≤–∏–¥–∏–º–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –∑–Ω–∏–∑—É
   - –ó–∞–±–µ–∑–ø–µ—á—É—î –ø—Ä–∞–≤–∏–ª—å–Ω—É –≤–∏—Å–æ—Ç—É —Å–∫—Ä–æ–ª–±–∞—Ä—É

2. **–û–≤–µ—Ä—Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ (overscan)**:
   - –†–µ–Ω–¥–µ—Ä–∏–º–æ –Ω–∞ 2-3 –µ–ª–µ–º–µ–Ω—Ç–∏ –±—ñ–ª—å—à–µ –∑–≤–µ—Ä—Ö—É/–∑–Ω–∏–∑—É
   - –ó–∞–±–µ–∑–ø–µ—á—É—î –ø–ª–∞–≤–Ω–∏–π —Å–∫—Ä–æ–ª –±–µ–∑ "–±–ª–∏–º–∞–Ω–Ω—è"

3. **–§—ñ–∫—Å–æ–≤–∞–Ω–∞ –≤–∏—Å–æ—Ç–∞ vs –î–∏–Ω–∞–º—ñ—á–Ω–∞**:
   - **–§—ñ–∫—Å–æ–≤–∞–Ω–∞**: –≤—Å—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ –æ–¥–Ω–∞–∫–æ–≤–æ—ó –≤–∏—Å–æ—Ç–∏ (—à–≤–∏–¥—à–µ)
   - **–î–∏–Ω–∞–º—ñ—á–Ω–∞**: –µ–ª–µ–º–µ–Ω—Ç–∏ —Ä—ñ–∑–Ω–æ—ó –≤–∏—Å–æ—Ç–∏ (–ø–æ–≤—ñ–ª—å–Ω—ñ—à–µ, –∞–ª–µ –≥–Ω—É—á–∫—ñ—à–µ)

---

## üìö –ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ –¥–ª—è –≤—ñ—Ä—Ç—É–∞–ª—ñ–∑–∞—Ü—ñ—ó

### 1. **react-window** (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∞)
```bash
npm install react-window
```

**–ü–µ—Ä–µ–≤–∞–≥–∏**:
- ‚úÖ –õ–µ–≥–∫–∞ (~2KB gzipped)
- ‚úÖ –®–≤–∏–¥–∫–∞
- ‚úÖ –ü—Ä–æ—Å—Ç–∞ –≤ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—ñ
- ‚úÖ –ü—ñ–¥—Ç—Ä–∏–º—É—î —Ñ—ñ–∫—Å–æ–≤–∞–Ω—É —Ç–∞ –¥–∏–Ω–∞–º—ñ—á–Ω—É –≤–∏—Å–æ—Ç—É

**–ü—Ä–∏–∫–ª–∞–¥**:
```tsx
import { FixedSizeList } from 'react-window';

<FixedSizeList
  height={600}           // –í–∏—Å–æ—Ç–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
  itemCount={1000}       // –ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –µ–ª–µ–º–µ–Ω—Ç—ñ–≤
  itemSize={50}          // –í–∏—Å–æ—Ç–∞ –æ–¥–Ω–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞
  width="100%"
>
  {({ index, style }) => (
    <div style={style}>
      <DeclarationRow data={declarations[index]} />
    </div>
  )}
</FixedSizeList>
```

### 2. **react-virtualized**
```bash
npm install react-virtualized
```

**–ü–µ—Ä–µ–≤–∞–≥–∏**:
- ‚úÖ –ë—ñ–ª—å—à–µ —Ñ—É–Ω–∫—Ü—ñ–π (—Ç–∞–±–ª–∏—Ü—ñ, —Å—ñ—Ç–∫–∏)
- ‚úÖ –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –¥–∏–Ω–∞–º—ñ—á–Ω–æ—ó –≤–∏—Å–æ—Ç–∏
- ‚ùå –í–∞–∂—á–∞ (~30KB)

### 3. **@tanstack/react-virtual** (—Å—É—á–∞—Å–Ω–∞)
```bash
npm install @tanstack/react-virtual
```

**–ü–µ—Ä–µ–≤–∞–≥–∏**:
- ‚úÖ –°—É—á–∞—Å–Ω–∞ API
- ‚úÖ –ì–Ω—É—á–∫–∞
- ‚úÖ –ü—ñ–¥—Ç—Ä–∏–º—É—î –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∏–π —Å–∫—Ä–æ–ª
- ‚úÖ –•–æ—Ä–æ—à–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

**–ü—Ä–∏–∫–ª–∞–¥**:
```tsx
import { useVirtualizer } from '@tanstack/react-virtual';

const parentRef = useRef<HTMLDivElement>(null);

const virtualizer = useVirtualizer({
  count: declarations.length,
  getScrollElement: () => parentRef.current,
  estimateSize: () => 50,
  overscan: 5,
});

return (
  <div ref={parentRef} style={{ height: '600px', overflow: 'auto' }}>
    <div style={{ height: `${virtualizer.getTotalSize()}px`, position: 'relative' }}>
      {virtualizer.getVirtualItems().map((virtualItem) => (
        <div
          key={virtualItem.key}
          style={{
            position: 'absolute',
            top: 0,
            left: 0,
            width: '100%',
            height: `${virtualItem.size}px`,
            transform: `translateY(${virtualItem.start}px)`,
          }}
        >
          <DeclarationRow data={declarations[virtualItem.index]} />
        </div>
      ))}
    </div>
  </div>
);
```

---

## üéØ –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –¥–ª—è –≤–∞—à–æ–≥–æ –ø—Ä–æ–µ–∫—Ç—É

### –ü–æ—Ç–æ—á–Ω–∞ —Å–∏—Ç—É–∞—Ü—ñ—è

–ó–∞—Ä–∞–∑ —É –≤–∞—Å –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è **–ø–∞–≥—ñ–Ω–∞—Ü—ñ—è**:

```tsx
// –ü–æ—Ç–æ—á–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è
const paginatedDocs = useMemo(() => {
  const start = (currentPage - 1) * itemsPerPage;
  const end = start + itemsPerPage;
  return sortedDocs.slice(start, end);
}, [sortedDocs, currentPage, itemsPerPage]);
```

**–ü–µ—Ä–µ–≤–∞–≥–∏ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—ó**:
- ‚úÖ –ü—Ä–æ—Å—Ç–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è
- ‚úÖ –õ–µ–≥–∫–æ –Ω–∞–≤—ñ–≥—É–≤–∞—Ç–∏ –ø–æ —Å—Ç–æ—Ä—ñ–Ω–∫–∞—Ö
- ‚úÖ –ú–µ–Ω—à–µ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–∞ –ø–æ—á–∞—Ç–∫—É

**–ù–µ–¥–æ–ª—ñ–∫–∏ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—ó**:
- ‚ùå –ù–µ–º–æ–∂–ª–∏–≤–æ —à–≤–∏–¥–∫–æ –ø—Ä–æ–∫—Ä—É—Ç–∏—Ç–∏ –≤–µ—Å—å —Å–ø–∏—Å–æ–∫
- ‚ùå –ü–æ—Ç—Ä—ñ–±–Ω–æ –∫–ª—ñ–∫–∞—Ç–∏ "–ù–∞—Å—Ç—É–ø–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞"
- ‚ùå –ù–µ –≤–∏–¥–Ω–æ –∑–∞–≥–∞–ª—å–Ω–æ—ó –∫–∞—Ä—Ç–∏–Ω–∏

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è: –ì—ñ–±—Ä–∏–¥–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥

**–í–∞—Ä—ñ–∞–Ω—Ç 1: –í—ñ—Ä—Ç—É–∞–ª—ñ–∑–∞—Ü—ñ—è + –ü–∞–≥—ñ–Ω–∞—Ü—ñ—è (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)**

```tsx
// –î–ª—è —Å–ø–∏—Å–∫—ñ–≤ > 100 –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ - –≤—ñ—Ä—Ç—É–∞–ª—ñ–∑–∞—Ü—ñ—è
// –î–ª—è —Å–ø–∏—Å–∫—ñ–≤ < 100 –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ - –∑–≤–∏—á–∞–π–Ω–∏–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥
const useVirtualization = sortedDocs.length > 100;

{useVirtualization ? (
  <VirtualizedList declarations={sortedDocs} />
) : (
  <RegularList declarations={sortedDocs} />
)}
```

**–í–∞—Ä—ñ–∞–Ω—Ç 2: –¢—ñ–ª—å–∫–∏ –≤—ñ—Ä—Ç—É–∞–ª—ñ–∑–∞—Ü—ñ—è**

–ó–∞–º—ñ–Ω–∏—Ç–∏ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—é –Ω–∞ –≤—ñ—Ä—Ç—É–∞–ª—ñ–∑–∞—Ü—ñ—é –¥–ª—è –≤—Å—ñ—Ö —Å–ø–∏—Å–∫—ñ–≤.

---

## üíª –ü—Ä–∏–∫–ª–∞–¥ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –¥–ª—è –≤–∞—à–æ–≥–æ –ø—Ä–æ–µ–∫—Ç—É

### 1. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏

```bash
npm install react-window
npm install --save-dev @types/react-window
```

### 2. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ VirtualizedTable

```tsx
// src/app/dashboard/archive/components/virtualized-table.tsx
'use client';

import { FixedSizeList } from 'react-window';
import { DeclarationWithRawData } from '../types';

interface VirtualizedTableProps {
  declarations: DeclarationWithRawData[];
  activeTab: 'list60' | 'list61';
  viewMode: 'table' | 'cards' | 'compact';
  onRowClick?: (id: string) => void;
}

export default function VirtualizedTable({
  declarations,
  activeTab,
  viewMode,
  onRowClick,
}: VirtualizedTableProps) {
  // –í–∏—Å–æ—Ç–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–º–æ–∂–Ω–∞ –∑—Ä–æ–±–∏—Ç–∏ –¥–∏–Ω–∞–º—ñ—á–Ω–æ—é)
  const containerHeight = 600;
  
  // –í–∏—Å–æ—Ç–∞ –æ–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞ –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ viewMode
  const rowHeight = viewMode === 'compact' ? 40 : viewMode === 'cards' ? 120 : 60;

  // –†–µ–Ω–¥–µ—Ä –æ–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞
  const Row = ({ index, style }: { index: number; style: React.CSSProperties }) => {
    const declaration = declarations[index];
    
    return (
      <div style={style}>
        {viewMode === 'table' && (
          <TableRow declaration={declaration} onClick={() => onRowClick?.(declaration.id)} />
        )}
        {viewMode === 'cards' && (
          <CardRow declaration={declaration} onClick={() => onRowClick?.(declaration.id)} />
        )}
        {viewMode === 'compact' && (
          <CompactRow declaration={declaration} onClick={() => onRowClick?.(declaration.id)} />
        )}
      </div>
    );
  };

  return (
    <FixedSizeList
      height={containerHeight}
      itemCount={declarations.length}
      itemSize={rowHeight}
      width="100%"
      overscanCount={5} // –†–µ–Ω–¥–µ—Ä–∏–º–æ –Ω–∞ 5 –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –±—ñ–ª—å—à–µ –¥–ª—è –ø–ª–∞–≤–Ω–æ—Å—Ç—ñ
    >
      {Row}
    </FixedSizeList>
  );
}
```

### 3. –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –≤ page-client.tsx

```tsx
// –ó–∞–º—ñ—Å—Ç—å –ø–æ—Ç–æ—á–Ω–æ—ó –ø–∞–≥—ñ–Ω–∞—Ü—ñ—ó
import VirtualizedTable from './components/virtualized-table';

// –í JSX
{activeTab === 'list60' && (
  <VirtualizedTable
    declarations={sortedDocs}
    activeTab="list60"
    viewMode={viewMode}
    onRowClick={(id) => router.push(`/dashboard/archive/${id}`)}
  />
)}
```

### 4. –î–ª—è –¥–∏–Ω–∞–º—ñ—á–Ω–æ—ó –≤–∏—Å–æ—Ç–∏ (—è–∫—â–æ –µ–ª–µ–º–µ–Ω—Ç–∏ —Ä—ñ–∑–Ω–æ—ó –≤–∏—Å–æ—Ç–∏)

```tsx
import { VariableSizeList } from 'react-window';

// –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –≤–∏—Å–æ—Ç–∏ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤
const itemSizes = useRef<Map<number, number>>(new Map());

const getItemSize = (index: number) => {
  return itemSizes.current.get(index) || 60; // default height
};

const Row = ({ index, style }: { index: number; style: React.CSSProperties }) => {
  const rowRef = useRef<HTMLDivElement>(null);
  
  useEffect(() => {
    if (rowRef.current) {
      const height = rowRef.current.getBoundingClientRect().height;
      itemSizes.current.set(index, height);
    }
  }, [index]);

  return (
    <div ref={rowRef} style={style}>
      {/* –∫–æ–Ω—Ç–µ–Ω—Ç */}
    </div>
  );
};

<VariableSizeList
  height={600}
  itemCount={declarations.length}
  itemSize={getItemSize}
  width="100%"
>
  {Row}
</VariableSizeList>
```

---

## üìä –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ

### –ë–µ–∑ –≤—ñ—Ä—Ç—É–∞–ª—ñ–∑–∞—Ü—ñ—ó (1000 –µ–ª–µ–º–µ–Ω—Ç—ñ–≤)
- ‚è±Ô∏è –ß–∞—Å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥—É: ~2-3 —Å–µ–∫—É–Ω–¥–∏
- üíæ DOM –µ–ª–µ–º–µ–Ω—Ç—ñ–≤: 1000+
- üìâ FPS –ø—Ä–∏ —Å–∫—Ä–æ–ª—ñ: 10-20
- üêå –ü–æ—á–∞—Ç–∫–æ–≤–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è: –ø–æ–≤—ñ–ª—å–Ω–µ

### –ó –≤—ñ—Ä—Ç—É–∞–ª—ñ–∑–∞—Ü—ñ—î—é (1000 –µ–ª–µ–º–µ–Ω—Ç—ñ–≤)
- ‚è±Ô∏è –ß–∞—Å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥—É: ~50-100ms
- üíæ DOM –µ–ª–µ–º–µ–Ω—Ç—ñ–≤: ~15-20
- üìà FPS –ø—Ä–∏ —Å–∫—Ä–æ–ª—ñ: 60
- ‚ö° –ü–æ—á–∞—Ç–∫–æ–≤–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è: –º–∏—Ç—Ç—î–≤–µ

---

## üé® –î–æ–¥–∞—Ç–∫–æ–≤—ñ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó

### 1. –ú–µ–º–æ—ñ–∑–∞—Ü—ñ—è —Ä—è–¥–∫—ñ–≤

```tsx
const Row = React.memo(({ index, style }: { index: number; style: React.CSSProperties }) => {
  const declaration = declarations[index];
  // ...
}, (prev, next) => {
  // –ü–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä—É—î–º–æ —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ –¥–∞–Ω—ñ –∑–º—ñ–Ω–∏–ª–∏—Å—è
  return prev.index === next.index;
});
```

### 2. Lazy loading –¥–∞–Ω–∏—Ö

```tsx
// –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ –¥–∞–Ω—ñ —á–∞—Å—Ç–∏–Ω–∞–º–∏
const [loadedItems, setLoadedItems] = useState(100);

useEffect(() => {
  if (sortedDocs.length > loadedItems) {
    // –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ –Ω–∞—Å—Ç—É–ø–Ω—ñ 100 –µ–ª–µ–º–µ–Ω—Ç—ñ–≤
    setTimeout(() => setLoadedItems(prev => prev + 100), 100);
  }
}, [sortedDocs.length, loadedItems]);
```

### 3. Debounce —Å–∫—Ä–æ–ª—É

```tsx
const handleScroll = useMemo(
  () => debounce((event: React.UIEvent<HTMLDivElement>) => {
    // –û–±—Ä–æ–±–∫–∞ —Å–∫—Ä–æ–ª—É
  }, 16), // ~60fps
  []
);
```

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó

- [ ] –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ `react-window` –∞–±–æ `@tanstack/react-virtual`
- [ ] –°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `VirtualizedTable`
- [ ] –ó–∞–º—ñ–Ω–∏—Ç–∏ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—é –Ω–∞ –≤—ñ—Ä—Ç—É–∞–ª—ñ–∑–∞—Ü—ñ—é (–∞–±–æ –∑—Ä–æ–±–∏—Ç–∏ –≥—ñ–±—Ä–∏–¥)
- [ ] –î–æ–¥–∞—Ç–∏ –ø—ñ–¥—Ç—Ä–∏–º–∫—É –≤—Å—ñ—Ö viewMode (table, cards, compact)
- [ ] –û–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Ä—è–¥–∫—ñ–≤ (React.memo)
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –∑ –≤–µ–ª–∏–∫–æ—é –∫—ñ–ª—å–∫—ñ—Å—Ç—é –¥–∞–Ω–∏—Ö (1000+)
- [ ] –î–æ–¥–∞—Ç–∏ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–ª—è –≤–µ–ª–∏–∫–∏—Ö —Å–ø–∏—Å–∫—ñ–≤
- [ ] –û–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏ –¥–ª—è –º–æ–±—ñ–ª—å–Ω–∏—Ö –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤

---

## üîó –ö–æ—Ä–∏—Å–Ω—ñ –ø–æ—Å–∏–ª–∞–Ω–Ω—è

- [react-window –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è](https://github.com/bvaughn/react-window)
- [@tanstack/react-virtual –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è](https://tanstack.com/virtual/latest)
- [–í—ñ–¥–µ–æ –ø—Ä–æ –≤—ñ—Ä—Ç—É–∞–ª—ñ–∑–∞—Ü—ñ—é](https://www.youtube.com/watch?v=URx1ju0BJ2Y)

---

**–í–∏—Å–Ω–æ–≤–æ–∫**: –í—ñ—Ä—Ç—É–∞–ª—ñ–∑–∞—Ü—ñ—è - —Ü–µ –æ–±–æ–≤'—è–∑–∫–æ–≤–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –¥–ª—è —Å–ø–∏—Å–∫—ñ–≤ –∑ 100+ –µ–ª–µ–º–µ–Ω—Ç–∞–º–∏. –í–æ–Ω–∞ –∑–Ω–∞—á–Ω–æ –ø–æ–∫—Ä–∞—â—É—î –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å —Ç–∞ UX.
