# üéØ –ü—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó –∑ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É –ø—Ä–æ–µ–∫—Ç—É MRNode

## üìä –ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω

**–ì–æ–ª–æ–≤–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞**: –§–∞–π–ª `src/app/dashboard/archive/page-client.tsx` –º—ñ—Å—Ç–∏—Ç—å **4179 —Ä—è–¥–∫—ñ–≤ –∫–æ–¥—É**, —â–æ —É—Å–∫–ª–∞–¥–Ω—é—î –ø—ñ–¥—Ç—Ä–∏–º–∫—É —Ç–∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è.

**–í–∂–µ –≤–∏–Ω–µ—Å–µ–Ω–æ –≤ –æ–∫—Ä–µ–º—ñ —Ñ–∞–π–ª–∏** ‚úÖ:
- `types.ts` - —Ç–∏–ø–∏
- `utils.ts` - —É—Ç–∏–ª—ñ—Ç–∏
- `constants.ts` - –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∏
- `filter-utils.ts` - –ª–æ–≥—ñ–∫–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó
- `export-utils.ts` - –ª–æ–≥—ñ–∫–∞ –µ–∫—Å–ø–æ—Ä—Ç—É
- `components/archive-statistics.tsx` - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- `components/virtualized-table-view.tsx` - –≤—ñ—Ä—Ç—É–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü—è

---

## üöÄ –í–∞—Ä—ñ–∞–Ω—Ç 1: –†–æ–∑–±–∏—Ç—Ç—è –Ω–∞ –æ–∫—Ä–µ–º—ñ —Ö—É–∫–∏ (–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ ‚≠ê)

### –ö–æ–Ω—Ü–µ–ø—Ü—ñ—è
–í–∏–Ω–µ—Å—Ç–∏ –≤—Å—é –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫—É –≤ –æ–∫—Ä–µ–º—ñ React —Ö—É–∫–∏, –∑–∞–ª–∏—à–∏–≤—à–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ª–∏—à–µ –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥—É.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
src/app/dashboard/archive/
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îú‚îÄ‚îÄ useArchiveData.ts          # –ü–∞—Ä—Å–∏–Ω–≥ —Ç–∞ –æ–±—Ä–æ–±–∫–∞ –¥–∞–Ω–∏—Ö
‚îÇ   ‚îú‚îÄ‚îÄ useArchiveFilters.ts       # –õ–æ–≥—ñ–∫–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó
‚îÇ   ‚îú‚îÄ‚îÄ useArchiveSorting.ts       # –õ–æ–≥—ñ–∫–∞ —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è
‚îÇ   ‚îú‚îÄ‚îÄ useArchivePagination.ts    # –õ–æ–≥—ñ–∫–∞ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—ó
‚îÇ   ‚îú‚îÄ‚îÄ useArchiveSelection.ts     # –í–∏–±—ñ—Ä –¥–µ–∫–ª–∞—Ä–∞—Ü—ñ–π
‚îÇ   ‚îú‚îÄ‚îÄ useArchiveStatistics.ts    # –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ useArchiveExport.ts        # –õ–æ–≥—ñ–∫–∞ –µ–∫—Å–ø–æ—Ä—Ç—É
‚îÇ   ‚îú‚îÄ‚îÄ useArchiveViewMode.ts      # –†–µ–∂–∏–º–∏ –ø–µ—Ä–µ–≥–ª—è–¥—É
‚îÇ   ‚îî‚îÄ‚îÄ useArchiveDelete.ts        # –í–∏–¥–∞–ª–µ–Ω–Ω—è –¥–µ–∫–ª–∞—Ä–∞—Ü—ñ–π
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ archive-filters-panel.tsx  # –ü–∞–Ω–µ–ª—å —Ñ—ñ–ª—å—Ç—Ä—ñ–≤
‚îÇ   ‚îú‚îÄ‚îÄ archive-toolbar.tsx        # –ü–∞–Ω–µ–ª—å —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤
‚îÇ   ‚îú‚îÄ‚îÄ archive-table-view.tsx     # –¢–∞–±–ª–∏—á–Ω–µ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è
‚îÇ   ‚îú‚îÄ‚îÄ archive-cards-view.tsx     # –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∫–∞—Ä—Ç–∫–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ archive-compact-view.tsx   # –ö–æ–º–ø–∞–∫—Ç–Ω–µ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è
‚îÇ   ‚îú‚îÄ‚îÄ archive-pagination.tsx     # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–∞–≥—ñ–Ω–∞—Ü—ñ—ó
‚îÇ   ‚îú‚îÄ‚îÄ archive-export-modal.tsx   # –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –µ–∫—Å–ø–æ—Ä—Ç—É
‚îÇ   ‚îú‚îÄ‚îÄ archive-delete-modal.tsx   # –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –≤–∏–¥–∞–ª–µ–Ω–Ω—è
‚îÇ   ‚îú‚îÄ‚îÄ archive-quick-preview.tsx  # –®–≤–∏–¥–∫–∏–π –ø–µ—Ä–µ–≥–ª—è–¥
‚îÇ   ‚îî‚îÄ‚îÄ archive-statistics.tsx     # (–≤–∂–µ —ñ—Å–Ω—É—î)
‚îî‚îÄ‚îÄ page-client.tsx                # –ì–æ–ª–æ–≤–Ω–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (~300 —Ä—è–¥–∫—ñ–≤)
```

### –ü—Ä–∏–∫–ª–∞–¥ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó

**`hooks/useArchiveFilters.ts`**
```typescript
export function useArchiveFilters(declarations: DeclarationWithRawData[]) {
    const [filters, setFilters] = useState<FilterState>({...});
    
    const filteredDocs = useMemo(() => {
        // –í—Å—è –ª–æ–≥—ñ–∫–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó (400+ —Ä—è–¥–∫—ñ–≤)
        return applyFilters(declarations, filters);
    }, [declarations, filters]);
    
    return {
        filters,
        setFilters,
        filteredDocs,
        resetFilters: () => setFilters(initialFilters)
    };
}
```

**`components/archive-filters-panel.tsx`**
```typescript
export function ArchiveFiltersPanel({ filters, onFiltersChange }) {
    return (
        <div className="filters-panel">
            {/* –í—Å—è UI –ª–æ–≥—ñ–∫–∞ —Ñ—ñ–ª—å—Ç—Ä—ñ–≤ */}
        </div>
    );
}
```

**`page-client.tsx` (–ø—ñ—Å–ª—è —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É)**
```typescript
export default function ArchivePageClient({ declarations }) {
    const dataHook = useArchiveData(declarations);
    const filtersHook = useArchiveFilters(dataHook.declarationsWithRawData);
    const sortingHook = useArchiveSorting(filtersHook.filteredDocs);
    const paginationHook = useArchivePagination(sortingHook.sortedDocs);
    
    return (
        <div>
            <ArchiveToolbar {...toolbarProps} />
            <ArchiveFiltersPanel {...filtersProps} />
            {viewMode === 'table' && <ArchiveTableView {...tableProps} />}
            {viewMode === 'cards' && <ArchiveCardsView {...cardsProps} />}
            <ArchivePagination {...paginationProps} />
        </div>
    );
}
```

### –ü–µ—Ä–µ–≤–∞–≥–∏ ‚úÖ
- **–ú–æ–¥—É–ª—å–Ω—ñ—Å—Ç—å**: –ö–æ–∂–µ–Ω —Ö—É–∫ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ —Å–≤–æ—é –æ–±–ª–∞—Å—Ç—å
- **–¢–µ—Å—Ç–æ–≤–∞–Ω—ñ—Å—Ç—å**: –õ–µ–≥–∫–æ —Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –æ–∫—Ä–µ–º—ñ —Ö—É–∫–∏
- **–ü–µ—Ä–µ–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è**: –•—É–∫–∏ –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –≤ —ñ–Ω—à–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
- **–ß–∏—Ç–∞–±–µ–ª—å–Ω—ñ—Å—Ç—å**: –ì–æ–ª–æ–≤–Ω–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å—Ç–∞—î –∑—Ä–æ–∑—É–º—ñ–ª–∏–º
- **–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å**: –õ–µ–≥—à–µ –æ–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏ –æ–∫—Ä–µ–º—ñ —á–∞—Å—Ç–∏–Ω–∏

### –ù–µ–¥–æ–ª—ñ–∫–∏ ‚ö†Ô∏è
- –ë—ñ–ª—å—à–µ —Ñ–∞–π–ª—ñ–≤ –¥–ª—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏
- –ü–æ—Ç—Ä—ñ–±–Ω–∞ –¥–∏—Å—Ü–∏–ø–ª—ñ–Ω–∞ –≤ –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—ó —Ö—É–∫—ñ–≤

---

## üîß –í–∞—Ä—ñ–∞–Ω—Ç 2: –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–µ —Ä–æ–∑–±–∏—Ç—Ç—è –Ω–∞ –ø—ñ–¥–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

### –ö–æ–Ω—Ü–µ–ø—Ü—ñ—è
–ó–∞–ª–∏—à–∏—Ç–∏ –≤—Å—é –ª–æ–≥—ñ–∫—É –≤ –≥–æ–ª–æ–≤–Ω–æ–º—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ, –∞–ª–µ –≤–∏–Ω–µ—Å—Ç–∏ UI —á–∞—Å—Ç–∏–Ω–∏ –≤ –æ–∫—Ä–µ–º—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
components/
‚îú‚îÄ‚îÄ archive-header.tsx              # –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∑ —Ç–∞–±–∞–º–∏ —Ç–∞ –ø–æ—à—É–∫–æ–º
‚îú‚îÄ‚îÄ archive-controls-bar.tsx        # –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è (–≤–∏–¥–∞–ª–µ–Ω–Ω—è, –µ–∫—Å–ø–æ—Ä—Ç)
‚îú‚îÄ‚îÄ archive-filters-section.tsx     # –°–µ–∫—Ü—ñ—è —Ñ—ñ–ª—å—Ç—Ä—ñ–≤
‚îú‚îÄ‚îÄ archive-table-container.tsx     # –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ç–∞–±–ª–∏—Ü—ñ
‚îú‚îÄ‚îÄ archive-cards-container.tsx     # –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–∞—Ä—Ç–æ–∫
‚îú‚îÄ‚îÄ archive-compact-container.tsx   # –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–æ–º–ø–∞–∫—Ç–Ω–æ–≥–æ –≤–∏–≥–ª—è–¥—É
‚îú‚îÄ‚îÄ archive-pagination-controls.tsx # –ö–æ–Ω—Ç—Ä–æ–ª–∏ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—ó
‚îú‚îÄ‚îÄ archive-quick-preview-modal.tsx # –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ –ø–µ—Ä–µ–≥–ª—è–¥—É
‚îî‚îÄ‚îÄ archive-export-settings-modal.tsx # –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –µ–∫—Å–ø–æ—Ä—Ç—É
```

### –ü—Ä–∏–∫–ª–∞–¥

**`components/archive-table-container.tsx`**
```typescript
interface ArchiveTableContainerProps {
    declarations: DeclarationWithRawData[];
    selectedIds: Set<string>;
    sortColumn: string | null;
    sortDirection: 'asc' | 'desc';
    onSelect: (id: string, checked: boolean) => void;
    onSort: (column: string) => void;
    onPreview: (doc: DeclarationWithRawData) => void;
}

export function ArchiveTableContainer({
    declarations,
    selectedIds,
    sortColumn,
    sortDirection,
    onSelect,
    onSort,
    onPreview
}: ArchiveTableContainerProps) {
    // –¢—ñ–ª—å–∫–∏ UI –ª–æ–≥—ñ–∫–∞ –¥–ª—è —Ç–∞–±–ª–∏—Ü—ñ
    return <VirtualizedTableView {...props} />;
}
```

### –ü–µ—Ä–µ–≤–∞–≥–∏ ‚úÖ
- –ü—Ä–æ—Å—Ç—ñ—à–∞ –º—ñ–≥—Ä–∞—Ü—ñ—è (–Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ –ª–æ–≥—ñ–∫—É)
- –ú–µ–Ω—à–µ –∑–º—ñ–Ω —É —Å—Ç—Ä—É–∫—Ç—É—Ä—ñ –¥–∞–Ω–∏—Ö
- –®–≤–∏–¥—à–µ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏

### –ù–µ–¥–æ–ª—ñ–∫–∏ ‚ö†Ô∏è
- –õ–æ–≥—ñ–∫–∞ –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è –≤ –æ–¥–Ω–æ–º—É –≤–µ–ª–∏–∫–æ–º—É —Ñ–∞–π–ª—ñ
- –°–∫–ª–∞–¥–Ω—ñ—à–µ —Ç–µ—Å—Ç—É–≤–∞—Ç–∏
- –ú–µ–Ω—à–∞ –º–æ–¥—É–ª—å–Ω—ñ—Å—Ç—å

---

## üé® –í–∞—Ä—ñ–∞–Ω—Ç 3: –ö–æ–º–±—ñ–Ω–æ–≤–∞–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥ (–ù–∞–π–∫—Ä–∞—â–∏–π –±–∞–ª–∞–Ω—Å ‚≠ê‚≠ê)

### –ö–æ–Ω—Ü–µ–ø—Ü—ñ—è
–ü–æ—î–¥–Ω–∞–Ω–Ω—è –í–∞—Ä—ñ–∞–Ω—Ç—É 1 —Ç–∞ –í–∞—Ä—ñ–∞–Ω—Ç—É 2: –∫—Ä–∏—Ç–∏—á–Ω–∞ –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞ –≤ —Ö—É–∫–∏, UI –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
src/app/dashboard/archive/
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îú‚îÄ‚îÄ useArchiveData.ts           # –ü–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–∏—Ö (useMemo –ª–æ–≥—ñ–∫–∞)
‚îÇ   ‚îú‚îÄ‚îÄ useArchiveFilters.ts        # –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è (—á–∏—Å—Ç–∞ —Ñ—É–Ω–∫—Ü—ñ—è + state)
‚îÇ   ‚îú‚îÄ‚îÄ useArchiveSorting.ts        # –°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è (—á–∏—Å—Ç–∞ —Ñ—É–Ω–∫—Ü—ñ—è + state)
‚îÇ   ‚îú‚îÄ‚îÄ useArchiveStatistics.ts     # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–≤–∞–∂–∫—ñ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è)
‚îÇ   ‚îî‚îÄ‚îÄ useArchiveState.ts          # –û–±'—î–¥–Ω–∞–Ω–∏–π state –º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ archive-header/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tabs.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ search-bar.tsx
‚îÇ   ‚îú‚îÄ‚îÄ archive-filters/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ filter-status.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ filter-dates.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ filter-customs-office.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ... (—ñ–Ω—à—ñ —Ñ—ñ–ª—å—Ç—Ä–∏)
‚îÇ   ‚îú‚îÄ‚îÄ archive-views/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ table-view.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cards-view.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ compact-view.tsx
‚îÇ   ‚îú‚îÄ‚îÄ archive-controls/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ toolbar.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pagination.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ view-mode-selector.tsx
‚îÇ   ‚îî‚îÄ‚îÄ archive-modals/
‚îÇ       ‚îú‚îÄ‚îÄ export-modal.tsx
‚îÇ       ‚îú‚îÄ‚îÄ delete-modal.tsx
‚îÇ       ‚îî‚îÄ‚îÄ quick-preview-modal.tsx
‚îî‚îÄ‚îÄ page-client.tsx                 # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü—ñ—è (~200-300 —Ä—è–¥–∫—ñ–≤)
```

### –ü–µ—Ä–µ–≤–∞–≥–∏ ‚úÖ
- –ù–∞–π–∫—Ä–∞—â–∞ –±–∞–ª–∞–Ω—Å—É–≤–∞–Ω–Ω—è –º—ñ–∂ –º–æ–¥—É–ª—å–Ω—ñ—Å—Ç—é —Ç–∞ –ø—Ä–∞–∫—Ç–∏—á–Ω—ñ—Å—Ç—é
- –õ–µ–≥–∫–æ —Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –æ–∫—Ä–µ–º—ñ —á–∞—Å—Ç–∏–Ω–∏
- –ó—Ä—É—á–Ω–æ –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞—Ç–∏ —Ç–∞ —Ä–æ–∑—à–∏—Ä—é–≤–∞—Ç–∏
- –ì–Ω—É—á–∫—ñ—Å—Ç—å –¥–ª—è –º–∞–π–±—É—Ç–Ω—ñ—Ö –∑–º—ñ–Ω

---

## üìã –í–∞—Ä—ñ–∞–Ω—Ç 4: –ü–æ–≤–Ω–µ –≤–∏–¥—ñ–ª–µ–Ω–Ω—è –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∏ –≤ —Å–µ—Ä–≤—ñ—Å–∏

### –ö–æ–Ω—Ü–µ–ø—Ü—ñ—è
–í–∏–Ω–µ—Å—Ç–∏ –≤—Å—é –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫—É –≤ –æ–∫—Ä–µ–º—ñ —Å–µ—Ä–≤—ñ—Å–Ω—ñ –∫–ª–∞—Å–∏/—Ñ—É–Ω–∫—Ü—ñ—ó, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ —Å—Ç–∞—é—Ç—å "—Ç—É–ø–∏–º–∏" –ø—Ä–µ–¥—Å—Ç–∞–≤–Ω–∏–∫–∞–º–∏.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
src/app/dashboard/archive/
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ archive-data.service.ts     # –ü–∞—Ä—Å–∏–Ω–≥ —Ç–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö
‚îÇ   ‚îú‚îÄ‚îÄ archive-filter.service.ts   # –õ–æ–≥—ñ–∫–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó
‚îÇ   ‚îú‚îÄ‚îÄ archive-sort.service.ts     # –õ–æ–≥—ñ–∫–∞ —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è
‚îÇ   ‚îú‚îÄ‚îÄ archive-statistics.service.ts # –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ archive-export.service.ts   # –ï–∫—Å–ø–æ—Ä—Ç (–º–æ–∂–Ω–∞ –æ–±'—î–¥–Ω–∞—Ç–∏ –∑ export-utils)
‚îú‚îÄ‚îÄ stores/
‚îÇ   ‚îî‚îÄ‚îÄ archive.store.ts            # Zustand/Jotai store –¥–ª—è state
‚îî‚îÄ‚îÄ components/
    ‚îî‚îÄ‚îÄ ... (—Ç—ñ–ª—å–∫–∏ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏)
```

### –ü–µ—Ä–µ–≤–∞–≥–∏ ‚úÖ
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ —Ç–µ—Å—Ç–æ–≤–∞–Ω—ñ—Å—Ç—å
- –ù–µ–∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –≤—ñ–¥ React
- –õ–µ–≥–∫–æ –¥–æ–¥–∞–≤–∞—Ç–∏ –Ω–æ–≤—ñ –ø—Ä–µ–¥—Å—Ç–∞–≤–Ω–∏–∫–∏ (CLI, API)

### –ù–µ–¥–æ–ª—ñ–∫–∏ ‚ö†Ô∏è
- –ù–∞–π–±—ñ–ª—å—à–∏–π –æ–±—Å—è–≥ —Ä–æ–±—ñ—Ç
- –ú–æ–∂–µ –±—É—Ç–∏ over-engineering –¥–ª—è React-–¥–æ–¥–∞—Ç–∫—É

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó

### –ï—Ç–∞–ø 1: –®–≤–∏–¥–∫—ñ –ø–µ—Ä–µ–º–æ–≥–∏ (1-2 –¥–Ω—ñ)
1. **–í–∏–Ω–µ—Å—Ç–∏ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –∑ –º–æ–¥–∞–ª—å–Ω–∏—Ö –≤—ñ–∫–æ–Ω**
   - `archive-export-modal.tsx`
   - `archive-delete-modal.tsx`
   - `archive-quick-preview-modal.tsx`

2. **–†–æ–∑–±–∏—Ç–∏ –≤–µ–ª–∏–∫—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤**
   - `QuickPreview60` ‚Üí `components/archive-quick-preview-60.tsx`
   - `QuickPreview61` ‚Üí `components/archive-quick-preview-61.tsx`

### –ï—Ç–∞–ø 2: –í–∏–¥—ñ–ª–µ–Ω–Ω—è —Ö—É–∫—ñ–≤ (3-5 –¥–Ω—ñ–≤)
1. **–•—É–∫–∏ –¥–ª—è state –º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç—É**
   - `useArchiveFilters` - –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –ª–æ–≥—ñ–∫—É —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó (~200 —Ä—è–¥–∫—ñ–≤)
   - `useArchiveSorting` - –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –ª–æ–≥—ñ–∫—É —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è (~150 —Ä—è–¥–∫—ñ–≤)
   - `useArchivePagination` - –ª–æ–≥—ñ–∫–∞ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—ó (~50 —Ä—è–¥–∫—ñ–≤)

2. **–•—É–∫–∏ –¥–ª—è –æ–±—á–∏—Å–ª–µ–Ω—å**
   - `useArchiveStatistics` - —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (~400 —Ä—è–¥–∫—ñ–≤)
   - `useArchiveData` - –ø–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–∏—Ö (~300 —Ä—è–¥–∫—ñ–≤)

### –ï—Ç–∞–ø 3: –†–æ–∑–±–∏—Ç—Ç—è UI (2-3 –¥–Ω—ñ)
1. **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è**
   - `ArchiveTableView`
   - `ArchiveCardsView`
   - `ArchiveCompactView`

2. **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è**
   - `ArchiveFiltersPanel`
   - `ArchiveToolbar`
   - `ArchivePagination`

### –û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

**–î–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É:**
- `page-client.tsx`: **4179 —Ä—è–¥–∫—ñ–≤**
- –°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å –ø—ñ–¥—Ç—Ä–∏–º–∫–∏: **–í–∏—Å–æ–∫–∞**

**–ü—ñ—Å–ª—è —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É (–í–∞—Ä—ñ–∞–Ω—Ç 3):**
- `page-client.tsx`: **~200-300 —Ä—è–¥–∫—ñ–≤** (–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü—ñ—è)
- `hooks/`: **~800-1000 —Ä—è–¥–∫—ñ–≤** (—Ä–æ–∑–ø–æ–¥—ñ–ª–µ–Ω—ñ)
- `components/`: **~1500-2000 —Ä—è–¥–∫—ñ–≤** (—Ä–æ–∑–ø–æ–¥—ñ–ª–µ–Ω—ñ)
- –°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å –ø—ñ–¥—Ç—Ä–∏–º–∫–∏: **–ù–∏–∑—å–∫–∞**

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø—ñ—Ö—É

- ‚úÖ –ì–æ–ª–æ–≤–Ω–∏–π —Ñ–∞–π–ª < 500 —Ä—è–¥–∫—ñ–≤
- ‚úÖ –ö–æ–∂–µ–Ω —Ö—É–∫ < 200 —Ä—è–¥–∫—ñ–≤
- ‚úÖ –ö–æ–∂–µ–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç < 300 —Ä—è–¥–∫—ñ–≤
- ‚úÖ –ü–æ–∫—Ä–∏—Ç—Ç—è —Ç–µ—Å—Ç–∞–º–∏ > 70%
- ‚úÖ –ß–∞—Å –ø–µ—Ä—à–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä—É –Ω–µ –ø–æ–≥—ñ—Ä—à—É—î—Ç—å—Å—è

---

## üîÑ –ü–ª–∞–Ω –º—ñ–≥—Ä–∞—Ü—ñ—ó

### –ë–µ–∑–ø–µ—á–Ω–∞ –º—ñ–≥—Ä–∞—Ü—ñ—è (feature flags)

```typescript
// –í–∞—Ä—ñ–∞–Ω—Ç –ø–æ—Å—Ç—É–ø–æ–≤–æ—ó –º—ñ–≥—Ä–∞—Ü—ñ—ó –∑ feature flags
const USE_NEW_ARCHIVE_UI = process.env.NEXT_PUBLIC_USE_NEW_ARCHIVE_UI === 'true';

export default function ArchivePageClient({ declarations }) {
    if (USE_NEW_ARCHIVE_UI) {
        return <ArchivePageClientNew declarations={declarations} />;
    }
    return <ArchivePageClientOld declarations={declarations} />;
}
```

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–æ–±–æ—Ç–∏
1. –ü–æ—Ä—ñ–≤–Ω—è—Ç–∏ –ø–æ–≤–µ–¥—ñ–Ω–∫—É —Å—Ç–∞—Ä–æ–≥–æ —Ç–∞ –Ω–æ–≤–æ–≥–æ UI
2. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å (React DevTools Profiler)
3. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤—Å—ñ edge cases
4. –û—Ç—Ä–∏–º–∞—Ç–∏ feedback –≤—ñ–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

---

## üí° –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó

### 1. –î–æ–¥–∞—Ç–∏ TypeScript strict mode
```typescript
// tsconfig.json
{
  "compilerOptions": {
    "strict": true,
    "noImplicitAny": true
  }
}
```

### 2. –î–æ–¥–∞—Ç–∏ ESLint rules –¥–ª—è —Ä–æ–∑–º—ñ—Ä—É —Ñ–∞–π–ª—ñ–≤
```json
{
  "rules": {
    "max-lines": ["warn", { "max": 500 }],
    "max-lines-per-function": ["warn", { "max": 100 }]
  }
}
```

### 3. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –∑ JSDoc
```typescript
/**
 * –§—ñ–ª—å—Ç—Ä—É—î –¥–µ–∫–ª–∞—Ä–∞—Ü—ñ—ó –∑–∞ –≤–∫–∞–∑–∞–Ω–∏–º–∏ –∫—Ä–∏—Ç–µ—Ä—ñ—è–º–∏
 * 
 * @param declarations - –ú–∞—Å–∏–≤ –¥–µ–∫–ª–∞—Ä–∞—Ü—ñ–π –¥–ª—è —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó
 * @param filters - –û–±'—î–∫—Ç –∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó
 * @returns –í—ñ–¥—Ñ—ñ–ª—å—Ç—Ä–æ–≤–∞–Ω–∏–π –º–∞—Å–∏–≤ –¥–µ–∫–ª–∞—Ä–∞—Ü—ñ–π
 */
export function filterDeclarations(
    declarations: DeclarationWithRawData[],
    filters: FilterState
): DeclarationWithRawData[] {
    // ...
}
```

### 4. Unit —Ç–µ—Å—Ç–∏ –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω–æ—ó –ª–æ–≥—ñ–∫–∏
```typescript
// __tests__/hooks/useArchiveFilters.test.ts
describe('useArchiveFilters', () => {
    it('should filter by status', () => {
        // ...
    });
    
    it('should filter by date range', () => {
        // ...
    });
});
```

---

## ‚ùì –Ø–∫–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç –æ–±—Ä–∞—Ç–∏?

**–î–ª—è —à–≤–∏–¥–∫–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É**: –í–∞—Ä—ñ–∞–Ω—Ç 2 (—Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–µ —Ä–æ–∑–±–∏—Ç—Ç—è)  
**–î–ª—è –¥–æ–≤–≥–æ—Å—Ç—Ä–æ–∫–æ–≤–æ—ó –ø—ñ–¥—Ç—Ä–∏–º–∫–∏**: –í–∞—Ä—ñ–∞–Ω—Ç 3 (–∫–æ–º–±—ñ–Ω–æ–≤–∞–Ω–∏–π) ‚≠ê‚≠ê‚≠ê  
**–î–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ—ó —Ç–µ—Å—Ç–æ–≤–∞–Ω–æ—Å—Ç—ñ**: –í–∞—Ä—ñ–∞–Ω—Ç 4 (—Å–µ—Ä–≤—ñ—Å–∏)

**–ú–æ—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è**: **–í–∞—Ä—ñ–∞–Ω—Ç 3** (–∫–æ–º–±—ñ–Ω–æ–≤–∞–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥) - –Ω–∞–π–∫—Ä–∞—â–∏–π –±–∞–ª–∞–Ω—Å –º—ñ–∂ –∑—É—Å–∏–ª–ª—è–º–∏ —Ç–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º.

---

**–î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è**: 2025-01-17  
**–ê–≤—Ç–æ—Ä**: AI Assistant  
**–°—Ç–∞—Ç—É—Å**: –ì–æ—Ç–æ–≤–æ –¥–æ –æ–±–≥–æ–≤–æ—Ä–µ–Ω–Ω—è
